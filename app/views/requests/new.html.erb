<% require "open-uri" %>
<% require "json" %>

<% url = ("https://openexchangerates.org/api/currencies.json") %>
<% currencies = JSON.parse(open(url).read) %>
<% cur_array = [] %>
<% currencies.each do |key, value|%>
<%  cur_array << [key] %>
<% end %>

<div class="wrapper">
  <div class="row">
    <div class="col-xs-12 col-lg-4 col-lg-offset-4">
      <div class="big-form">

  <div class="form" id="currency-form" class="activated">


        <%= simple_form_for @request, url: {action: "create"} do |f|  %>
      <section id="input-currency">
        <div class="container-form">
          <div class="form-input">
        <h2 > What are you swapping? </h2>
        <div class="">

        <%= f.select :request_currency, options_for_select(cur_array.each { |x| x }) %>
        </div>
          </div>
        <div class="flex-buttons" id="first-page-form">
          <div class="btn btn-success btn-form-next next">NEXT
          </div>
        </div>
        </div>
      </section>

       <section id="quantity-currency" class="deactivated">
        <div class="container-form">
            <div class="form-input">
        <h2> How much of your currency do you want to swap? </h2>
        <%= f.text_field :request_amount, placeholder: "Amount", class:"form-control search-stretch input-field gray-background" %>
        <%#= f.input :request_amount %>
            </div>
        <div class="flex-buttons">
          <div class="btn btn-primary btn-form-next previous">BACK
          </div>
          <div class="btn btn-success btn-form-next next">NEXT
          </div>
        </div>

        </div>
      </section>

       <section id="wanted-currency" class="deactivated">
        <div class="container-form">
          <div class="form-input">
        <h2> Which currency are you looking for? </h2>
                <div class="form-control gray-background">
        <%= f.select :wanted_currency, options_for_select(cur_array.each { |x| x }), class:"form-control gray-background" %>
                </div>
            </div>
         <div class="flex-buttons">
          <div class="btn btn-primary btn-form-next previous">BACK
          </div>
          <div class="btn btn-success btn-form-next next">NEXT
          </div>
        </div>
        </div>
      </section>

       <section id="location" class="deactivated">
        <div class="container-form">
            <div class="form-input">
        <h2> Where do you want to swap?</h2>
        <%= f.text_field :location, placeholder: "Location", class:"form-control search-stretch input-field gray-background" %>
        <%#= f.input :location %>
            </div>
        <div class="flex-buttons">
          <div class="btn btn-primary btn-form-next previous">BACK
          </div>
          <div class="btn btn-success btn-form-next next">NEXT
          </div>
        </div>
        </div>
      </section>

  <section id="time" class="deactivated">
    <div class="container-form">
        <div class="form-input">
           <h2> When do you want to swap?</h2>
           <div class="row">

                <%= f.input :start_date, as: :string, required: false, input_html: {class: "datepicker form-control"} %>
                <%= f.input :end_date, as: :string, required: false, input_html: {class: "datepicker form-control"} %>

            </div>
          </div>

      <div class="flex-buttons">
        <div class="btn btn-primary btn-form-next previous">BACK
        </div>
        <%= f.submit "NEXT", class: "btn btn-success btn-form-next next" %>
      </div>
  </div>
</section>
      <% end %>
    </div>


  </div>
    </div>
  </div>

